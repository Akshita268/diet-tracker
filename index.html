<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Discipline Arena</title>

<link rel="manifest" href="manifest.json">

<!-- iOS ICON SUPPORT -->
<link rel="apple-touch-icon" href="icon-192.png">
<link rel="apple-touch-icon" sizes="512x512" href="icon-512.png">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="theme-color" content="#020617">

<style>
:root{
  --bg:#020617;--card:#0f172a;
  --red:#dc2626;--green:#16a34a;--gold:#fbbf24;
}
*{box-sizing:border-box;font-family:Inter,system-ui,sans-serif}
body{
  margin:0;background:radial-gradient(circle at top,#0f172a,#020617);
  color:#fff;display:flex;justify-content:center;align-items:center;min-height:100vh
}
.app{
  width:380px;background:var(--card);border-radius:22px;
  padding:22px;border:1px solid #334155;
  box-shadow:0 0 50px rgba(0,0,0,.6);
  position:relative;overflow:hidden
}
.app.boss{box-shadow:0 0 50px rgba(251,191,36,.7)}
.badge{
  text-align:center;font-size:11px;
  font-weight:800;letter-spacing:1px;
  padding:6px;border-radius:999px;
  background:#020617;border:1px solid #334155;
  margin-bottom:8px
}
h1{text-align:center;margin:8px 0;color:var(--gold)}

.stats{
  display:flex;justify-content:space-between;
  font-size:12px;margin-bottom:8px
}
.bar{background:#020617;border-radius:10px;overflow:hidden;margin:8px 0}
.fill{height:12px;transition:.4s}

.health{background:linear-gradient(90deg,var(--green),#22c55e)}
.pressure{background:linear-gradient(90deg,var(--red),#991b1b)}

.state{
  text-align:center;font-weight:800;
  margin:12px 0;font-size:13px
}

button{
  width:100%;padding:15px;
  border-radius:14px;border:none;
  font-weight:800;cursor:pointer
}
.clean{background:var(--green);margin-bottom:10px}
.junk{background:var(--red)}
button:disabled{opacity:.4}

.msg{
  min-height:44px;text-align:center;
  font-style:italic;color:var(--red);
  margin-top:10px;font-size:13px
}
.quest{
  margin-top:14px;padding:10px;
  background:#020617;border-radius:10px;
  font-size:12px;border:1px dashed #334155
}
</style>
</head>

<body>
<div class="app" id="app">
  <div class="badge" id="rank">RANK: WEAKLING</div>
  <h1>DISCIPLINE ARENA</h1>

  <div class="stats">
    <div>Score <b id="score">1000</b></div>
    <div>Streak <b id="streak">0</b></div>
  </div>

  <div class="bar"><div class="fill health" id="health"></div></div>
  <div class="bar"><div class="fill pressure" id="pressure"></div></div>

  <div class="state" id="stateText">WAITING‚Ä¶</div>

  <button class="clean" id="cleanBtn">‚úî STAYED CLEAN</button>
  <button class="junk" id="junkBtn">‚úñ ATE JUNK</button>

  <div class="msg" id="msg"></div>

  <div class="quest" id="quest">
    üéØ Quest: Survive 3 clean hours
  </div>
</div>

<script>
const HOUR=3600000,KEY="arena";
const RANKS=["WEAKLING","DISCIPLINED","IRON WILL","RELENTLESS"];

let s=JSON.parse(localStorage.getItem(KEY))||{
 score:1000,streak:0,clean:0,pressure:0,last:0
};

const $=i=>document.getElementById(i);
const app=$("app");

function rank(){
 if(s.streak>=12)return RANKS[3];
 if(s.streak>=6)return RANKS[2];
 if(s.streak>=3)return RANKS[1];
 return RANKS[0];
}

function ui(){
 $("score").textContent=s.score;
 $("streak").textContent=s.streak;
 $("rank").textContent="RANK: "+rank();
 $("health").style.width=Math.min(100,s.score/10)+"%";
 $("pressure").style.width=Math.min(100,s.pressure*10)+"%";

 const d=Date.now()-s.last;
 const boss=s.clean>0 && s.clean%6===0;

 app.classList.toggle("boss",boss);
 $("stateText").textContent=boss?"‚öîÔ∏è BOSS HOUR":"‚è± CHECK-IN";

 $("cleanBtn").disabled=d<HOUR;
 $("junkBtn").disabled=d<HOUR;

 localStorage.setItem(KEY,JSON.stringify(s));
}

$("cleanBtn").onclick=()=>{
 s.last=Date.now();s.score+=10;s.clean++;
 s.pressure=Math.max(0,s.pressure-1);
 $("msg").textContent="You resisted.";
 if(s.clean%6===0){s.streak++;s.score+=100}
 ui();
};

$("junkBtn").onclick=()=>{
 s.last=Date.now();s.score-=200;s.clean=0;
 s.streak=0;s.pressure+=2;
 $("msg").textContent="You folded under pressure.";
 ui();
};

setInterval(()=>{
 if(Date.now()-s.last>HOUR)s.pressure++;
 ui();
},1000);

ui();
</script>
</body>
</html>
