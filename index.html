<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Discipline Ledger</title>

<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icon-192.png">
<link rel="apple-touch-icon" sizes="512x512" href="icon-512.png">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#020617">

<style>
:root{
  --bg:#020617;--card:#0f172a;
  --green:#16a34a;--red:#dc2626;--gold:#fbbf24;
}
*{box-sizing:border-box;font-family:Inter,system-ui,sans-serif}
body{
  margin:0;background:radial-gradient(circle at top,#0f172a,#020617);
  color:#fff;display:flex;justify-content:center;align-items:center;min-height:100vh
}
.app{
  width:380px;background:var(--card);
  border-radius:22px;padding:20px;
  border:1px solid #334155;
}
h1{text-align:center;color:var(--gold);margin:8px 0}
.stats{text-align:center;margin-bottom:10px;font-size:13px}
button{
  width:100%;padding:14px;
  border-radius:12px;border:none;
  font-weight:800;margin-bottom:10px;cursor:pointer
}
.clean{background:var(--green)}
.junk{background:var(--red)}
.secondary{
  background:#020617;color:#94a3b8;
  border:1px solid #334155
}
.msg{
  min-height:50px;text-align:center;
  font-style:italic;margin:10px 0
}
.hidden{display:none}

/* Junk choices */
.levels button{margin-bottom:8px}

/* Calendar */
.calendar{
  display:grid;grid-template-columns:repeat(7,1fr);
  gap:6px;margin-top:10px;font-size:11px
}
.day{
  padding:8px 0;text-align:center;
  border-radius:6px;background:#020617;
  border:1px solid #334155
}
.day.clean{background:rgba(22,163,74,.7)}
.day.junk{background:rgba(220,38,38,.7)}
</style>
</head>

<body>
<div class="app">
  <h1>DISCIPLINE LEDGER</h1>

  <div class="stats">
    Daily check-in â€¢ Be honest
  </div>

  <button class="clean" id="cleanBtn">âœ” I STAYED CLEAN TODAY</button>
  <button class="junk" id="junkBtn">âœ– I ATE JUNK TODAY</button>

  <div id="levels" class="levels hidden">
    <button class="junk" onclick="logJunk('low')">Low junk (skip 1 meal)</button>
    <button class="junk" onclick="logJunk('medium')">Medium junk (skip 2 meals)</button>
    <button class="junk" onclick="logJunk('high')">High junk (skip 3 meals + exercise)</button>
  </div>

  <div class="msg" id="msg">No report yet today.</div>

  <button class="secondary" onclick="toggleCalendar()">ðŸ“… View Calendar</button>

  <div id="calendar" class="calendar hidden"></div>
</div>

<script>
const KEY="disciplineLedger";
let data = JSON.parse(localStorage.getItem(KEY)) || {};

const today = new Date().toISOString().slice(0,10);

function save(){
  localStorage.setItem(KEY,JSON.stringify(data));
}

function cleanToday(){
  data[today]={status:"clean"};
  document.getElementById("msg").textContent="Good. Discipline recorded.";
  save();renderCalendar();
}

function showJunkLevels(){
  document.getElementById("levels").classList.remove("hidden");
}

function logJunk(level){
  data[today]={status:"junk",level};
  const consequences={
    low:"Skip 1 meal tomorrow.",
    medium:"Skip 2 meals tomorrow.",
    high:"Skip 3 meals + extra exercise."
  };
  document.getElementById("msg").textContent=
    `Junk recorded. Consequence: ${consequences[level]}`;
  document.getElementById("levels").classList.add("hidden");
  save();renderCalendar();
}

function toggleCalendar(){
  document.getElementById("calendar").classList.toggle("hidden");
  renderCalendar();
}

function renderCalendar(){
  const cal=document.getElementById("calendar");
  cal.innerHTML="";
  const now=new Date();
  const year=now.getFullYear();
  const month=now.getMonth();
  const days=new Date(year,month+1,0).getDate();

  for(let d=1;d<=days;d++){
    const date=new Date(year,month,d).toISOString().slice(0,10);
    const div=document.createElement("div");
    div.className="day";
    div.textContent=d;
    if(data[date]?.status==="clean")div.classList.add("clean");
    if(data[date]?.status==="junk")div.classList.add("junk");
    cal.appendChild(div);
  }
}

document.getElementById("cleanBtn").onclick=cleanToday;
document.getElementById("junkBtn").onclick=showJunkLevels;

renderCalendar();
</script>
</body>
</html>
